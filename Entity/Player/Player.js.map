{"version":3,"file":"Player.js","sourceRoot":"","sources":["../../../src/Entity/Player/Player.ts"],"names":[],"mappings":";;AACA,8CAAuC;AACvC,mCAA4B;AAG5B,oDAAkD;AAIlD,MAAqB,MAAO,SAAQ,oBAAU;IAM5C,YAAY,IAAU,EAAE,IAAY,EAAE,MAAe;QACnD,KAAK,CAAC,IAAI,CAAC,CAAC;QAEZ,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QAErB,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;QACf,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAE7B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC;QAE5B,IAAI,CAAC,MAAM,GAAG,IAAI,eAAU,CAAC,IAAI,CAAC,CAAC;QAGnC,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,QAAQ,CAAC,GAAG,QAAQ,CAAC;IACrD,CAAC;IAED,SAAS;QACP,KAAK,CAAC,SAAS,EAAE,CAAC;QAClB,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC;QAExB,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI;YAAE,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;IACrD,CAAC;IAED,mBAAmB,CAAC,MAAkB;QACpC,IAAI,MAAM,YAAY,eAAK,IAAI,MAAM,CAAC,KAAK,KAAK,IAAI,EAAE;YACpD,IAAI,CAAC,SAAS,EAAE,CAAC;SAClB;IACH,CAAC;IAED,WAAW,CAAC,MAAc,EAAE,UAAmB;QAC7C,IAAI,UAAU,EAAE;YACd,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YACb,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACzB,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YACb,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SACvB;QAED,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QAC3B,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QAC3B,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACvB,CAAC;CACF;AAjDD,yBAiDC","sourcesContent":["import Game from \"../../Game\";\nimport BaseEntity from \"../BaseEntity\";\nimport Flail from \"./Flail\";\nimport Rope from \"./Rope/Rope\";\nimport Client from \"../../Client\";\nimport BasicFlail from \"./FlailDefinitions/Basic\";\nimport FlailDefinition from \"./FlailDefinitions/BaseDefinition\";\nimport { Writer } from \"../../Coder\";\n\nexport default class Player extends BaseEntity {\n  public weapon: FlailDefinition;\n  public client?: Client;\n  public name: string;\n  public color: number;\n\n  constructor(game: Game, name: string, client?: Client) {\n    super(game); \n\n    this.name = name;\n    this.client = client;\n\n    this.size = 10;\n    this.collides = true;\n    this.detectsCollision = true;\n\n    this.restLength = this.size;\n\n    this.weapon = new BasicFlail(this);\n\n\n    this.color = (Math.random() * 0xFFFFFF) | 33554432;\n  }\n\n  terminate() {\n    super.terminate();\n    this.weapon.terminate();\n\n    if (this.client != null) this.client.player = null;\n  }\n\n  onCollisionCallback(entity: BaseEntity) {\n    if (entity instanceof Flail && entity.owner !== this) {\n      this.terminate();\n    }\n  }\n\n  writeBinary(writer: Writer, isCreation: boolean) {\n    if (isCreation) {\n      writer.vu(1);\n      writer.string(this.name);\n      writer.vu(2);\n      writer.vu(this.color);\n    }\n    \n    writer.vi(this.position.x);\n    writer.vi(this.position.y);\n    writer.vu(this.size);\n  }\n}\n"]}